{
  "item": [
    {
      "id": "669060e1-8536-4d76-ad58-dd090aa55fb9",
      "name": "List all users",
      "request": {
        "name": "List all users",
        "description": {},
        "url": {
          "path": [
            "users"
          ],
          "host": [
            "{{baseUrl}}"
          ],
          "query": [],
          "variable": []
        },
        "header": [
          {
            "key": "Accept",
            "value": "application/json"
          }
        ],
        "method": "GET",
        "auth": null
      },
      "response": [
        {
          "id": "052119a6-6025-4e25-8a1c-ee2d3c7bccf8",
          "name": "A list of users",
          "originalRequest": {
            "url": {
              "path": [
                "users"
              ],
              "host": [
                "{{baseUrl}}"
              ],
              "query": [],
              "variable": []
            },
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "method": "GET",
            "body": {}
          },
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "[\n  {\n    \"id\": 30581919,\n    \"name\": \"sit aliquip sunt\"\n  },\n  {\n    \"id\": 41181997,\n    \"name\": \"veniam Excepteur\"\n  }\n]",
          "cookie": [],
          "_postman_previewlanguage": "json"
        }
      ],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 2xx\", function () {",
              "    pm.response.to.be.success;",
              "});",
              "",
              "pm.test(\"Schema is valid\", function() {",
              "    // Attempt to get the schema from the response definition in the collection",
              "    // openapi-to-postmanv2 might store the expected response schema here",
              "    if (pm.item.responses && pm.item.responses && pm.item.responses[0] && pm.item.responses[0].body) {",
              "        let expectedSchema = pm.item.responses[0].body;",
              "        if (expectedSchema) {",
              "            try {",
              "                // Assuming the schema is a JSON string, it needs to be parsed",
              "                let schema = JSON.parse(expectedSchema);",
              "                pm.response.to.have.jsonSchema(schema);",
              "            } catch (e) {",
              "                console.error(\"Failed to parse schema or schema not found for this request. Schema string: \" + expectedSchema, e);",
              "                // Fail the test if schema cannot be parsed or is invalid",
              "                pm.expect(false, \"Schema parsing/validation failed: \" + e.message).to.be.true;",
              "            }",
              "        } else {",
              "            // If no schema is defined for the response, log it.",
              "            // Depending on requirements, this could be a failing test.",
              "            console.log(\"No schema found for this response in the collection definition.\");",
              "        }",
              "    } else {",
              "        console.log(\"No response schema definition found in pm.item.responses for this request.\");",
              "        // Optionally, fail the test if a schema is always expected.",
              "        // pm.expect(false, \"Response schema definition missing in collection\").to.be.true;",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      }
    }
  ],
  "event": [],
  "variable": [
    {
      "type": "string",
      "value": "/",
      "key": "baseUrl"
    }
  ],
  "info": {
    "_postman_id": "45081b6d-a301-4d6a-ac5a-11f401514008",
    "name": "Sample API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": {
      "content": "",
      "type": "text/plain"
    }
  }
}